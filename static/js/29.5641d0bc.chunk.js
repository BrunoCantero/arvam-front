(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[29],{622:function(e,n,r){"use strict";r.d(n,"a",(function(){return u}));var t=r(38),a=r(15),c=r(159),o=r(1),s=r.n(o),i=r(621),l=function(e){var n=e.name,r=e.text,o=Object(c.a)(e,["name","text"]),s=n?"https://coreui.io/react/docs/components/".concat(n):e.href;return Object(a.jsx)("div",{className:"card-header-actions",children:Object(a.jsx)(i.bb,Object(t.a)(Object(t.a)({},o),{},{href:s,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:Object(a.jsx)("small",{className:"text-muted",children:r||"docs"})}))})},u=s.a.memo(l)},629:function(e,n,r){"use strict";var t={server:"https://cors-anywhere.herokuapp.com/http://ec2-3-16-129-81.us-east-2.compute.amazonaws.com:1337"};n.a=t},632:function(e,n,r){"use strict";var t=r(15),a=(r(620),r(621));n.a=function(e){var n=e.children,r=e.visible,c=e.modalToggle,o=e.title,s=e.onSubmit,i=e.isEditing;return Object(t.jsx)(t.Fragment,{children:Object(t.jsxs)(a.eb,{show:r,onClose:c,children:[Object(t.jsx)(a.hb,{closeButton:!0,children:o}),Object(t.jsx)(a.fb,{children:n}),Object(t.jsxs)(a.gb,{children:[i?null:Object(t.jsx)(a.f,{onClick:s,color:"primary",children:"Guardar"}),Object(t.jsx)(a.f,{color:"secondary",onClick:c,children:"Cancel"})]})]})})}},633:function(e,n,r){"use strict";var t=r(15),a=r(621);n.a=function(e){var n=e.children,r=e.visible,c=e.modalToggle,o=e.title,s=e.onSubmit;return Object(t.jsxs)(a.eb,{show:r,onClose:c,color:"warning",children:[Object(t.jsx)(a.hb,{closeButton:!0,children:Object(t.jsx)(a.ib,{children:o})}),Object(t.jsx)(a.fb,{children:n}),Object(t.jsxs)(a.gb,{children:[Object(t.jsx)(a.f,{color:"warning",onClick:s,children:"Eliminar"}),Object(t.jsx)(a.f,{color:"secondary",onClick:c,children:"Cancelar"})]})]})}},720:function(e,n,r){"use strict";r.r(n);var t=r(15),a=r(161),c=r(38),o=r(627),s=r.n(o),i=r(628),l=r(623),u=r(1),d=(r(620),r(621)),p=(r(622),r(632)),m=r(633),b=r(630),h=r.n(b),j=r(629),f=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("apitoken");case 2:return n=e.sent,r={headers:{"Access-Control-Allow-Origin":"*",Accept:"*/*",host:"arbam-test.herokuapp.com","Content-Type":"application/x-www-form-urlencoded",Authorization:n}},e.prev=4,e.next=7,h.a.get(j.a.server+"/api/admin",r);case 7:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("apitoken");case 2:return r=e.sent,t={headers:{"Access-Control-Allow-Origin":"*",Accept:"*/*",host:"arbam-test.herokuapp.com","Content-Type":"application/x-www-form-urlencoded",Authorization:r}},e.prev=4,e.next=7,h.a.post(j.a.server+"/api/admin",n,t);case 7:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("apitoken");case 2:return r=e.sent,t={headers:{"Access-Control-Allow-Origin":"*",Accept:"*/*",host:"arbam-test.herokuapp.com","Content-Type":"application/x-www-form-urlencoded",Authorization:r}},e.prev=4,e.next=7,h.a.delete(j.a.server+"/api/admin/"+n,t);case 7:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(s.a.mark((function e(n,r){var t,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("apitoken");case 2:return t=e.sent,a={headers:{"Access-Control-Allow-Origin":"*",Accept:"*/*",host:"arbam-test.herokuapp.com","Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(t)}},e.prev=4,e.next=7,h.a.put(j.a.server+"/api/admin/"+r,n,a);case 7:return c=e.sent,console.log(c.data),e.abrupt("return",c.data);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(n,r){return e.apply(this,arguments)}}(),g=[{key:"name",value:"nombre",sorter:!0},"email","phone_number","actions"],w={name:"Nombre",email:"Email",phone_number:"Tel\xe9fono",actions:"Acciones"};n.default=function(e){var n=e.history,r=Object(u.useState)(!1),o=Object(l.a)(r,2),b=o[0],h=o[1],j=Object(u.useState)(!1),k=Object(l.a)(j,2),_=k[0],C=k[1],y=Object(u.useState)(!1),S=Object(l.a)(y,2),A=S[0],F=S[1],E=Object(u.useState)(!1),N=Object(l.a)(E,2),T=N[0],K=N[1],Q=Object(u.useState)(null),U=Object(l.a)(Q,2),z=U[0],B=U[1],I=Object(u.useState)([]),D=Object(l.a)(I,2),q=D[0],J=D[1],P=Object(u.useState)(null),G=Object(l.a)(P,2),H=G[0],R=G[1],L=Object(u.useState)({id:"",name:"",email:"",password:"",confirm:"",area_code:"+549",phone_number:""}),M=Object(l.a)(L,2),V=M[0],W=M[1],X=function(){h(!b),W({name:"",email:"",password:"",confirm:"",area_code:"+549",phone_number:""}),F(!1),K(!1)};Object(u.useEffect)((function(){Y(),$()}),[]);var Y=function(){var e=Object(i.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("apitoken");case 2:null!==(r=e.sent)&&void 0!==r||n.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FormData,""!==V.name&&""!==V.email&&""!==V.area_code&&""!==V.phone_number){e.next=5;break}K(!0),e.next=29;break;case 5:if(n.append("name",V.name),n.append("email",V.email),n.append("area_code",V.area_code),n.append("phone_number",V.phone_number),""!==V.password&&""!==V.confirm&&(n.append("password",V.password),n.append("confirm",V.confirm)),""===V.id||""===V.name){e.next=28;break}return e.prev=11,e.next=14,v(n,V.id);case 14:if(!(r=e.sent)){e.next=21;break}return console.log(r.data,"usuario creado"),h(!b),e.next=20,$();case 20:F(!1);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11),console.log(e.t0);case 26:e.next=29;break;case 28:K(!0);case 29:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(i.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,f();case 4:return n=e.sent,e.next=7,J(n.data.reverse());case 7:if(!(n.data.length>0)){e.next=10;break}return e.next=10,R(!1);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){C(!_),B(e)},ne=function(){var e=Object(i.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n,"si entra al delete"),e.prev=1,null===n){e.next=5;break}return e.next=5,O(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return C(!_),e.next=13,$();case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FormData,""!==V.name&&""!==V.email&&""!==V.password&&""!==V.confirm&&""!==V.area_code&&""!==V.phone_number){e.next=5;break}K(!0),e.next=25;break;case 5:return n.append("name",V.name),n.append("email",V.email),n.append("password",V.password),n.append("confirm",V.confirm),n.append("area_code",V.area_code),n.append("phone_number",V.phone_number),e.prev=11,e.next=14,x(n);case 14:if(!(r=e.sent)){e.next=20;break}return console.log(r.data,"usuario creado"),h(!b),e.next=20,$();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(){return e.apply(this,arguments)}}(),te=function(e){e.preventDefault(),W(Object(c.a)(Object(c.a)({},V),{},Object(a.a)({},e.target.name,e.target.value))),console.log(V)};return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsxs)(d.j,{children:[Object(t.jsx)(d.n,{children:Object(t.jsx)(d.f,{color:"primary",onClick:function(){return X()},className:"mr-1",children:"Agregar Usuario"})}),Object(t.jsx)(d.u,{xs:"12",lg:"12",children:Object(t.jsxs)(d.j,{children:[Object(t.jsx)(d.n,{children:"Usuarios"}),Object(t.jsx)(d.k,{children:Object(t.jsx)(d.y,{items:q,fields:g,columnHeaderSlot:w,itemsPerPage:10,columnFilterSlot:g,loading:H,tableFilter:{label:"Buscar",placeholder:"Buscar Usuario"},pagination:!0,striped:!0,responsive:!0,scopedSlots:{actions:function(e){return Object(t.jsxs)("td",{children:[Object(t.jsx)(d.f,{style:{marginRight:10},onClick:function(){return function(e){h(!b),F(!0),K(!1),W(Object(c.a)(Object(c.a)({},V),{},{id:e.id,name:e.name,email:e.email,area_code:e.area_code,phone_number:e.phone_number,password:"",confirm:""}))}(e)},color:"warning",children:"Editar"}),Object(t.jsx)(d.f,{onClick:function(){return ee(e.id)},color:"danger",children:"Eliminar"})]})},phone_number:function(e){return Object(t.jsx)("td",{children:"".concat(e.area_code," ").concat(e.phone_number)})}}})})]})})]}),Object(t.jsx)(p.a,{visible:b,modalToggle:X,title:"Usuario",onSubmit:A?function(){return Z()}:function(){return re()},children:Object(t.jsx)(d.u,{xs:"12",sm:"12",children:Object(t.jsx)(d.j,{children:Object(t.jsxs)(d.k,{children:[Object(t.jsx)(d.ab,{hidden:!0,htmlFor:"id",children:"id"}),Object(t.jsx)(d.Q,{hidden:!0,onChange:function(e){return te(e)},name:"id",id:"id",value:V.name,placeholder:"id"}),Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"name",children:"Nombre"}),Object(t.jsx)(d.Q,{required:!0,valid:""!==V.name,onChange:function(e){return te(e)},name:"name",id:"name",value:V.name,placeholder:"Nombre"})]}),Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"email",children:"Email"}),Object(t.jsx)(d.Q,{onChange:function(e){return te(e)},required:!0,valid:""!==V.email&&V.email.includes("@"),invalid:""!==V.email&&!V.email.includes("@"),type:"email",name:"email",id:"email",value:V.email,placeholder:"Email"})]}),Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"password",children:"Contrase\xf1a"}),Object(t.jsx)(d.Q,{onChange:function(e){return te(e)},valid:V.password===V.confirm&&""!==V.password&&""!==V.confirm,name:"password",type:"password",id:"password",value:V.password,placeholder:"Contrase\xf1a"})]}),Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"confirm",children:"Confirmar contrase\xf1a"}),Object(t.jsx)(d.Q,{onChange:function(e){return te(e)},valid:V.password===V.confirm&&""!==V.password&&""!==V.confirm,invalid:V.password!==V.confirm&&""!==V.confirm,name:"confirm",type:"password",id:"confirm",value:V.confirm,placeholder:"Contrase\xf1a"})]}),Object(t.jsxs)(d.K,{row:!0,className:"my-0",children:[Object(t.jsx)(d.u,{xs:"4",children:Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"area_code",children:"Cod. Area"}),Object(t.jsx)(d.Q,{valid:""!==V.area_code,onChange:function(e){return te(e)},type:"text",name:"area_code",value:V.area_code,readOnly:!0,disabled:!0,placeholder:"cod. area"})]})}),Object(t.jsx)(d.u,{xs:"8",children:Object(t.jsxs)(d.K,{children:[Object(t.jsx)(d.ab,{htmlFor:"phone_number",children:"N\xfamero"}),Object(t.jsx)(d.Q,{valid:""!==V.phone_number,onChange:function(e){return te(e)},type:"number",name:"phone_number",id:"phone_number",value:V.phone_number,placeholder:"N\xfamero"})]})}),T?Object(t.jsx)(d.u,{children:Object(t.jsx)(d.K,{children:Object(t.jsx)(d.a,{color:"danger",children:"Debes ingresar todos los campos!"})})}):null]})]})})})}),Object(t.jsx)(m.a,{visible:_,onSubmit:function(){return ne(z)},modalToggle:function(){return ee(null)},title:"Eliminar Usuario",children:"Estas seguro de eliminar este Usuario?"})]})}}}]);
//# sourceMappingURL=29.5641d0bc.chunk.js.map